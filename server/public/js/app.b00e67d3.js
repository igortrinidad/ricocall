(function(t){function e(e){for(var o,a,r=e[0],l=e[1],c=e[2],d=0,f=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var l=n[r];0!==s[l]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},s={app:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1:function(t,e){},"16a3":function(t,e,n){"use strict";n("2e29")},"2c93":function(t,e,n){"use strict";n("2fef")},"2e29":function(t,e,n){},"2fef":function(t,e,n){},"3bff":function(t,e,n){"use strict";var o=n("0e44"),s=n("2b0e"),i=n("2f62"),a={loggedUser:null,loggedUserType:null,loggedUserToken:null},r={getterLoggedUser:function(t){return t.loggedUser},getterLoggedUserType:function(t){return t.loggedUserType},getterLoggedUserToken:function(t){return t.loggedUserToken}},l=(n("b0c0"),n("d3b7"),n("ac1f"),n("3ca3"),n("841c"),n("ddb0"),n("2b3d"),n("fae1")),c=n("b048"),u=n("a18c"),d={attemptUserLogin:function(t,e){var n=e.email,o=e.password;l["a"].post("/user/auth/login",{email:n,password:o},{loader:!0}).then((function(e){var n=e.data.token;t.commit("setLoggedUserToken",{token:n}),t.dispatch("getLoggedUser",{})})).catch((function(t){t.response&&401==t.response.status?Object(c["b"])("Ops, check your credentials..."):Object(c["b"])("Ops, something goes wrong with this app!")}))},getLoggedUser:function(t,e){var n=e.redirect,o=void 0===n||n;l["a"].get("/user/auth/getLoggedUser").then((function(e){var n=e.data,s=n.user;if(t.commit("setLoggedUser",{user:s}),Object(c["c"])("Welcome ".concat(s.name," !")),t.dispatch("setupTwilioDevice"),o){var i=new URLSearchParams(window.location.search),a=i.get("redirectTo");a?u["a"].push(a,(function(){})):u["a"].push("/home",(function(){}))}})).catch((function(e){e.response&&403==e.response.status?(Object(c["b"])("Sorry, it's seems that somebody blocked you :/"),t.dispatch("logoutUser",{showNotification:!1})):Object(c["b"])("Ops, something did wrong with this app, comeback later!")}))},registerUser:function(t,e){var n=e.user;l["a"].post("/user/auth/register",n,{loader:!0}).then((function(e){var n=e.data.token;t.commit("setLoggedUserToken",{token:n}),t.dispatch("getLoggedUser",{})})).catch((function(){Object(c["b"])("Erro ao cadastrar, verifique os dados.")}))},logoutUser:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.showNotification,o=void 0===n||n;s["a"].prototype.$socket.emit("leaveRoom",{userId:t.getters.getterLoggedUser.id}),t.commit("setLogout"),o&&Object(c["c"])("Successfully logout"),u["a"].push("/",(function(){})),t.dispatch("destroyTwilioDevice")}},f={setLoggedUserToken:function(t,e){var n=e.type,o=e.token;t.loggedUserType=n,t.loggedUserToken=o},setLoggedUser:function(t,e){var n=e.user;t.loggedUser=n},setLogout:function(t){t.loggedUser=null,t.loggedUserToken=null,t.loggedUserType=null}},m={state:a,getters:r,actions:d,mutations:f},p={loaderShow:!1,loaderInstances:0,sideMenuIsOpen:!1},g={getterLoaderShow:function(t){return t.loaderShow},getterLoaderInstances:function(t){return t.loaderInstances},getterSideMenuIsOpen:function(t){return t.sideMenuIsOpen}},h={setLoaderShow:function(t,e){if(e){var n=t.getters.getterLoaderInstances,o=n+1;t.commit("setLoaderShow",{loaderShow:!0,loaderInstances:o})}else t.dispatch("setLoaderOff")},setLoaderOff:function(t){setTimeout((function(){var e=t.getters.getterLoaderInstances;if(1===e)t.commit("setLoaderShow",{loaderShow:!1,loaderInstances:0});else{var n=e-1;t.commit("setLoaderShow",{loaderShow:!0,loaderInstances:n})}}),500)},resetLoader:function(t){t.commit("resetLoader")}},v={setLoaderShow:function(t,e){var n=e.loaderShow,o=e.loaderInstances;t.loaderShow=n,t.loaderInstances=o},resetLoader:function(t){t.loaderShow=!1,t.loaderInstances=0},setSideMenuIsOpen:function(t,e){t.sideMenuIsOpen=e}},b={state:p,getters:g,actions:h,mutations:v},w={activeConnection:null,activeConnectionStatus:null,activeConnectionType:null,activeConnectionFromUserName:null,activeConnectionToUserName:null},y={getterActiveConnection:function(t){return t.activeConnection},getterActiveConnectionStatus:function(t){return t.activeConnectionStatus},getterActiveConnectionType:function(t){return t.activeConnectionType},getterActiveConnectionFromUserName:function(t){return t.activeConnectionFromUserName},getterActiveConnectionToUserName:function(t){return t.activeConnectionToUserName}},C=(n("4160"),n("159b"),n("2909")),k=n("e736"),x=n("5c7d");Object(x["getLogger"])(k["Device"].packageName);var _={setupTwilioDevice:function(t){t.commit("setActiveConnection",null),l["a"].get("/twilio/token").then((function(e){var n=e.data,o=n.token;k["Device"].setup(o),k["Device"].on("ready",(function(){console.log("Twilio Ready")})),k["Device"].on("error",(function(t){console.log("Error: "+t.message)})),k["Device"].on("incoming",(function(e){Object(C["a"])(e.customParameters.entries()).forEach((function(e){"fromUserName"==e[0]&&t.commit("setActiveConnectionFromUserName",e[1]),"toUserName"==e[0]&&t.commit("setActiveConnectionToUserName",e[1])})),t.commit("setActiveConnection",e),t.commit("setActiveConnectionStatus",e.status()),t.commit("setActiveConnectionType","incoming"),s["a"].prototype.$socket.emit("updateUserStatus",{userId:t.getters.getterLoggedUser.id,status:"busy"}),t.dispatch("warmupConnection",e)})),k["Device"].on("offline",(function(){t.dispatch("setupTwilioDevice")})),k["Device"].on("disconnect",(function(){s["a"].prototype.$socket.emit("updateUserStatus",{userId:t.getters.getterLoggedUser.id,status:"online"})}))}))},destroyTwilioDevice:function(){k["Device"].destroy()},makeTwilioCall:function(t,e){var n=e.user,o=k["Device"].connect({From:t.getters.getterLoggedUser.id,To:n.id});console.log(o),t.commit("setActiveConnection",o),t.commit("setActiveConnectionStatus",o.status()),t.commit("setActiveConnectionType","outgoing"),t.commit("setActiveConnectionToUserName",n.name),s["a"].prototype.$socket.emit("updateUserStatus",{userId:t.getters.getterLoggedUser.id,status:"busy"}),t.dispatch("warmupConnection",o)},warmupConnection:function(t,e){e.on("cancel",(function(){t.dispatch("clearConnection")})),e.on("disconnect",(function(){s["a"].prototype.$notifications.error("Call ended"),"outgoing"==t.getters.getterActiveConnectionType&&t.dispatch("clearConnection")})),e.on("error",(function(){t.dispatch("clearConnection")})),e.on("hangup",(function(){t.dispatch("clearConnection")})),e.on("reject",(function(){t.dispatch("clearConnection")})),e.on("transportClose",(function(){t.dispatch("clearConnection")})),e.on("accept",(function(){t.commit("setActiveConnection",e),t.commit("setActiveConnectionStatus",e.status())}))},clearConnection:function(t){t.commit("setActiveConnection",null),t.commit("setActiveConnectionStatus",null),t.commit("setActiveConnectionType",null),s["a"].prototype.$socket.emit("updateUserStatus",{userId:t.getters.getterLoggedUser.id,status:"online"})},acceptCall:function(t){t.getters.getterActiveConnection.accept(),s["a"].prototype.$notifications.success("Call accepted")},rejectIncomingCall:function(t){t.getters.getterActiveConnection.reject(),k["Device"].disconnectAll(),t.commit("setActiveConnection",null),t.commit("setActiveConnectionStatus",null),s["a"].prototype.$socket.emit("updateUserStatus",{userId:t.getters.getterLoggedUser.id,status:"online"})},disconnectConnection:function(t){k["Device"].disconnectAll(),t.commit("setActiveConnection",null),t.commit("setActiveConnectionStatus",null),s["a"].prototype.$socket.emit("updateUserStatus",{userId:t.getters.getterLoggedUser.id,status:"online"})}},U={setActiveConnection:function(t,e){t.activeConnection=e},setActiveConnectionStatus:function(t,e){t.activeConnectionStatus=e},setActiveConnectionType:function(t,e){t.activeConnectionType=e},setActiveConnectionFromUserName:function(t,e){t.activeConnectionFromUserName=e},setActiveConnectionToUserName:function(t,e){t.activeConnectionToUserName=e}},j={state:w,getters:y,actions:_,mutations:U};s["a"].use(i["a"]);var L=new i["a"].Store({modules:{auth:m,general:b,caller:j},plugins:[Object(o["a"])({key:"ricocall"})]});e["a"]=L},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full block m-auto h-screen overflow-y-auto bg-blue p-3 md:p-10 md:pb-6",attrs:{id:"app"}},[n("div",{staticClass:"w-full shadow-md flex h-full relative"},[n("SideMenu"),n("div",{staticClass:"w-full h-full overflow-y-auto flex flex-col bg-white"},[n("MainHeader"),n("router-view")],1)],1),n("Loader"),t._m(0)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full mt-4 flex justify-center items-center"},[n("a",{staticClass:"f-white",attrs:{href:"https://igortrindade.dev",target:"_blank"}},[n("img",{attrs:{alt:"Developed by Igor Trindade",src:"https://igortrindade.dev/mkt/icon.png",width:"36px"}})])])}],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-blue side-menu-container items-start md:h-full max-w-full md:max-w-1/3 absolute md:static bg-grey-light p-6  shadow-sm z-10 flex flex-wrap",class:[t.$store.getters.getterSideMenuIsOpen?"h-full menu-open w-full":""]},[t.$store.getters.getterSideMenuIsOpen?n("button",{staticClass:"cursor-pointer focus:outline-none flex text-black",attrs:{"aria-label":"Close side menu"},on:{click:function(e){return t.close()}}},[n("feather",{attrs:{type:"x",size:"28"}})],1):n("button",{staticClass:"cursor-pointer focus:outline-none flex text-black",attrs:{"aria-label":"open side menu"},on:{click:function(e){return t.open()}}},[n("feather",{attrs:{type:"menu"}})],1),n("div",{staticClass:"side-menu-content h-full w-full flex"},[t.$store.getters.getterSideMenuIsOpen?n("div",{staticClass:"w-full flex flex-col h-full"},[n("router-link",{staticClass:"inline-block w-full flex items-center justify-center",attrs:{to:t.$store.getters.getterLoggedUser?"/home":"/"}},[n("img",{attrs:{src:"/logo.svg",width:"128px",alt:"Ricocall Logo"}})]),t.$store.getters.getterLoggedUser?t._e():n("div",{staticClass:"w-full flex-col p-4 w-full flex"},[n("router-link",{staticClass:"button-sm text-center text-grey hover:text-black my-1",class:["About"==t.$route.name?"text-black":""],attrs:{to:{name:"About"},"aria-label":"about"}},[t._v(" About ")]),n("router-link",{staticClass:"button-sm text-center text-grey hover:text-black my-1",class:["Login"==t.$route.name?"text-black":""],attrs:{to:{name:"Login"},"aria-label":"Login"}},[t._v(" Login ")])],1),t.$store.getters.getterLoggedUser?n("div",{staticClass:"w-full flex-col p-4 w-full flex md:hidden"},[n("router-link",{staticClass:"button-sm text-center text-grey hover:text-black my-1",class:["Home"==t.$route.name?"text-black":""],attrs:{to:{name:"Home"},"aria-label":"logout"}},[t._v(" Home ")]),n("router-link",{staticClass:"button-sm text-center text-grey hover:text-black my-1",class:["Settings"==t.$route.name?"text-black":""],attrs:{to:{name:"Settings"},"aria-label":"logout"}},[t._v(" Settings ")]),n("button",{staticClass:"button-sm text-center text-grey hover:text-black my-1",attrs:{"aria-label":"logout"},on:{click:function(e){return t.logout()}}},[t._v(" "+t._s(t.$store.getters.getterLoggedUser.name)+" logout ")])],1):t._e(),t.$store.getters.getterLoggedUser?n("div",{staticClass:"w-full flex max-h-full overflow-y-auto my-4"},[n("UserList"),n("Caller")],1):t._e()],1):t._e()])])},r=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full flex flex-wrap"},[t._m(0),t._l(t.sortedUserList,(function(e){return n("div",{key:e.id,staticClass:"w-full"},[n("button",{staticClass:"button bg-white shadow-sm flex justify-center w-full rounded-full text-blue mb-4 text-sm",on:{click:function(n){return t.checkCall(e)}}},[n("span",{staticClass:"w-3/4 max-w-3/4 ellipsis text-left"},[t._v(t._s(e.name))]),n("span",{staticClass:"text-xs ml-2",class:[t.getUserStatusClass(t.checkUserStatus(e))]},[t._v(t._s(t.checkUserStatus(e)))])])])}))],2)},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",{staticClass:"w-full mb-4 text-center border-b-4 border-yellow"},[n("span",{},[t._v("Contacts")])])}],u=(n("c975"),n("fb6a"),n("b0c0"),n("5530")),d=(n("4de4"),n("b64b"),function(t,e){for(var n=0;n<t.length;n++){var o=Object.keys(e).filter((function(o){return e[o]===t[n][o]}));if(o.length===Object.keys(e).length)return t[n]}return!1}),f=n("2f62"),m={name:"UserList",data:function(){return{users:[],onlineUsers:[]}},mounted:function(){var t=this;this.getUsers(),this.joinSocketRoom(),this.$socket.on("onlineUsers",(function(e){var n=e.onlineUsers;t.onlineUsers=n,t.getUsers()}))},computed:{sortedUserList:function(){var t=this,e=["online","busy","offline"];return this.users.slice().sort((function(n,o){return e.indexOf(t.checkUserStatus(n))-e.indexOf(t.checkUserStatus(o))}))}},methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["makeTwilioCall"])),{},{getUsers:function(){var t=this;this.$api.get("/users/get").then((function(e){var n=e.data;t.users=n.users}))},joinSocketRoom:function(){this.$socket.emit("joinRoom",{userId:this.$store.getters.getterLoggedUser.id})},checkUserStatus:function(t){var e=d(this.onlineUsers,{userId:t.id});return e?e.status:"offline"},getUserStatusClass:function(t){return"busy"==t?"text-blue":"online"==t?"text-green":"text-grey"},checkCall:function(t){this.$store.getters.getterActiveConnection||("busy"!==this.checkUserStatus(t)?"offline"!==this.checkUserStatus(t)?this.makeTwilioCall({user:t}):this.$notifications.warning("".concat(t.name," is offline, call again later!")):this.$notifications.warning("".concat(t.name," is busy, call again later!")))}})},p=m,g=n("2877"),h=Object(g["a"])(p,l,c,!1,null,null,null),v=h.exports,b={name:"SideMenu",components:{UserList:v},mounted:function(){window.innerWidth>798&&this.open()},methods:{close:function(){this.$store.commit("setSideMenuIsOpen",!1)},open:function(){this.$store.commit("setSideMenuIsOpen",!0)}}},w=b,y=(n("2c93"),Object(g["a"])(w,a,r,!1,null,null,null)),C=y.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$store.getters.getterLoggedUser?n("div",{staticClass:"w-full flex justify-end p-4 w-full h-16 invisible md:visible"},[n("router-link",{staticClass:"button-sm flex items-center text-grey hover:text-black",class:["Home"==t.$route.name?"border-b-4 border-yellow text-black":""],attrs:{to:{name:"Home"},"aria-label":"logout"},on:{click:function(e){return t.logout()}}},[t._v(" Home ")]),n("router-link",{staticClass:"button-sm flex items-center text-grey hover:text-black",class:["About"==t.$route.name?"border-b-4 border-yellow text-black":""],attrs:{to:{name:"About"},"aria-label":"logout"},on:{click:function(e){return t.logout()}}},[t._v(" About ")]),n("router-link",{staticClass:"button-sm flex items-center text-grey hover:text-black",class:["Settings"==t.$route.name?"border-b-4 border-yellow text-black":""],attrs:{to:{name:"Settings"},"aria-label":"logout"},on:{click:function(e){return t.logout()}}},[t._v(" Settings ")]),n("button",{staticClass:"button-sm flex items-center text-grey hover:text-black",attrs:{"aria-label":"logout"},on:{click:function(e){return t.logout()}}},[t._v(" "+t._s(t.$store.getters.getterLoggedUser.name)+" logout ")])],1):t._e()},x=[],_={name:"Header",methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["logoutUser"])),{},{logout:function(){this.logoutUser()}})},U=_,j=Object(g["a"])(U,k,x,!1,null,null,null),L=j.exports,S={name:"App",components:{SideMenu:C,MainHeader:L}},O=S,I=(n("034f"),Object(g["a"])(O,s,i,!1,null,null,null)),$=I.exports,T=n("a18c"),A=n("3bff");n("8af5"),n("7766"),A["a"].dispatch("resetLoader"),A["a"].getters.getterLoggedUser&&A["a"].dispatch("getLoggedUser",{loader:!0}),new o["a"]({router:T["a"],store:A["a"],render:function(t){return t($)}}).$mount("#app")},"74ae":function(t,e,n){"use strict";n("b4ad")},7766:function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),s=n("8055"),i=n.n(s);e["default"]=function(){var t=i()("https://ricocall.igortrindade.dev",{reconnectionDelay:2e3,reconnectionDelayMax:5e3,reconnectionAttempts:20});t.on("connect",(function(){console.log("Socket successfully connected")})),o["a"].prototype.$socket=t}()},"85ec":function(t,e,n){},"8af5":function(t,e,n){"use strict";n.r(e);var o=n("2b0e"),s=n("62ad"),i=n.n(s),a=n("fae1"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full h-full absolute inset-0 z-50 my-auto bg-smoke flex items-center justify-center loader",class:[t.getterLoaderShow?"flex":"hidden"],attrs:{id:"loader"}},[n("div",{staticClass:"spinnerx"})])},l=[],c=n("5530"),u=n("2f62"),d={name:"Loader",computed:Object(c["a"])({},Object(u["c"])(["getterLoaderShow"]))},f=d,m=(n("74ae"),n("2877")),p=Object(m["a"])(f,r,l,!1,null,null,null),g=p.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block w-full mt-2"},[t.label?n("label",{staticClass:"block mb-2",attrs:{for:t.getId}},[n("span",{staticClass:"border-b-2 border-yellow"},[t._v(t._s(t.label))])]):t._e(),n("div",{staticClass:"relative check-input"},[n("input",{staticClass:"block appearance-none outline-none w-full h-full border-2 border-grey-medium focus:border-yellow bg-grey-light text-grey-darker text-lg py-2 pr-4 pl-10",class:{"border-red":t.validation.filled&&t.validation.hasError},attrs:{id:t.getId,type:t.getType,placeholder:t.label,autocapitalize:t.autocapitalize,required:t.required,"aria-required":t.required,"aria-labelledby":"#id","aria-invalid":t.validation.hasError},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.makeAction()}}}),n("div",{staticClass:"text-black icon-highlight h-full absolute pin-y top-0 flex items-center text-grey pointer-events-none pl-2"},[n("feather",{staticClass:"icon-highlight",attrs:{type:t.icon}})],1),"password"===t.type?n("button",{staticClass:"h-full absolute pin-y top-0 right-0 mr-3 flex items-center text-grey pl-2 text-black hover:shadow-sm focus:outline-none focus:shadow",on:{click:function(e){t.showPassword=!t.showPassword}}},[n("feather",{attrs:{type:t.showPassword?"eye-off":"eye",size:"18"}})],1):t._e()])])},v=[],b=(n("ac1f"),n("5319"),{name:"InputWithIcon",props:{icon:{type:String,default:"plus"},type:{type:String,default:"text"},placeholder:{type:String,default:""},value:{required:!0},id:{required:!1},label:{type:String,default:""},action:{type:Function,required:!1},autocapitalize:{type:String,default:"sentences"},required:{type:Boolean,default:!1},validation:{type:Object,default:function(){return{hasError:!1,checked:!1}}}},data:function(){return{showPassword:!1}},computed:{getId:function(){return this.id?this.id:this.label.replace(/[^\w\s]/gi,"").toLowerCase()},getType:function(){return"password"!==this.type?this.type:"password"===this.type&&this.showPassword?"text":this.type}},methods:{change:function(){this.$emit("input",this.value)},makeAction:function(){this.action&&"function"==typeof this.action&&this.action()}}}),w=b,y=(n("16a3"),Object(m["a"])(w,h,v,!1,null,null,null)),C=y.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$store.getters.getterActiveConnection?n("div",{staticClass:"w-full h-full absolute inset-0 z-50 my-auto bg-smoke flex items-center justify-center loader p-8"},["incoming"==t.$store.getters.getterActiveConnectionType?n("div",{staticClass:"w-full h-3/4 max-w-md flex flex-col items-center justify-around"},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/incoming.svg",width:"198px"}}),n("div",{staticClass:"w-full max-w-sm my-6"},[n("h1",{staticClass:"w-full text-center text-white"},[t._v(t._s(t.$store.getters.getterActiveConnectionFromUserName))])]),n("div",{staticClass:"w-full max-w-sm flex justify-around"},[n("button",{staticClass:"bg-red p-6 text-white rounded-full",on:{click:function(e){return t.rejectIncomingCall()}}},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/call.svg",width:"44px"}})]),"open"!=t.$store.getters.getterActiveConnectionStatus?n("button",{staticClass:"bg-green p-6 text-white rounded-full",on:{click:function(e){return t.acceptCall()}}},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/call.svg",width:"44px"}})]):t._e()])]):n("div",{staticClass:"w-full h-3/4 max-w-md flex flex-col items-center justify-around"},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/outgoing.svg",width:"198px"}}),n("div",{staticClass:"w-full max-w-sm my-6"},[n("h1",{staticClass:"w-full text-center text-white"},[t._v(t._s(t.$store.getters.getterActiveConnectionToUserName))])]),n("div",{staticClass:"w-full max-w-sm flex justify-around"},[n("button",{staticClass:"bg-red p-6 text-white rounded-full",on:{click:function(e){return t.rejectIncomingCall()}}},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/call.svg",width:"44px"}})])])])]):t._e()},x=[],_={name:"Caller",data:function(){return{}},mounted:function(){},methods:Object(c["a"])({},Object(u["b"])(["disconnectConnection","rejectIncomingCall","acceptCall"]))},U=_,j=Object(m["a"])(U,k,x,!1,null,null,null),L=j.exports,S=n("b048");e["default"]=function(){o["a"].config.productionTip=!1,o["a"].prototype.$api=a["a"],o["a"].prototype.$notifications=new S["a"],o["a"].use(i.a),o["a"].component("InputWithIcon",C),o["a"].component("Loader",g),o["a"].component("Caller",L),o["a"].directive("click-outside",{bind:function(t,e,n){t.clickOutsideEvent=function(o){t==o.target||t.contains(o.target)||n.context[e.expression](o)},document.body.addEventListener("click",t.clickOutsideEvent)},unbind:function(t){document.body.removeEventListener("click",t.clickOutsideEvent)}})}()},9242:function(t,e,n){n("99af"),n("4de4"),n("a15b"),n("d81d");var o,s=n("7037"),i=n("970b"),a=n("5bc3"),r=n("9523"),l=(o=function(){"use strict";function t(){var e=this;i(this,t),r(this,"validation",(function(t){return e[t].length?e.errors.filter((function(e){return e.item==t})).length?{hasError:!0,checked:!1,filled:!0}:{hasError:!1,checked:!0,filled:!0}:{hasError:!0,checked:!1,filled:!1}}))}return a(t,[{key:"errors",get:function(){var t=this;return this.requireds.filter((function(e){if("boolean"!=typeof t[e.item]||t[e.item])return"function"==typeof e.validation?e.validation(t[e.item],t):"string"==typeof t[e.item]&&!t[e.item].length||Array.isArray(t[e.item])&&!t[e.item].length||"object"==s(t[e.item])&&!t[e.item]?e:void 0}))}},{key:"hasError",get:function(){return!!this.errors.length}},{key:"errorPhrase",get:function(){return{init:"Please, check this information ",end:" to procceed."}}},{key:"validationPhrase",get:function(){return this.errorPhrase.init+this.errors.map((function(t){return t.label})).join(", ")+this.errorPhrase.end}},{key:"validationPhraseHtml",get:function(){return"".concat(this.errorPhrase.init," <b>").concat(this.errors.map((function(t){return t.label})).join(", "),"</b> ").concat(this.errorPhrase.end)}}]),t}(),o);t.exports=l},a18c:function(t,e,n){"use strict";var o=n("2b0e"),s=n("8c4f"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full h-3/4 flex flex-wrap items-center justify-center"},[n("div",{staticClass:"w-full max-w-sm flex flex-wrap justify-center p-4"},[n("img",{attrs:{src:"/logo.svg",width:"144px",alt:"Ricocall Logo"}}),"signin"==t.type?n("div",{staticClass:"w-full my-8"},[n("SignIn",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),n("div",{staticClass:"w-full p-4 border border-grey-light shadow-sm mt-6"},[n("p",[t._v("New to Ricocall? "),n("button",{staticClass:"text-blue font-bold",on:{click:function(e){return t.changeView("signup")}}},[t._v("Create an account !")])])])],1):t._e(),"signup"==t.type?n("div",{staticClass:"w-full my-8"},[n("SignUp",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),n("div",{staticClass:"w-full p-4 border border-grey-light shadow-sm mt-6"},[n("p",[t._v("Already have a Ricocall account? "),n("button",{staticClass:"text-blue font-bold px-0",on:{click:function(e){return t.changeView("signin")}}},[t._v("To go login !")])])])],1):t._e(),"recover"==t.type?n("div",{staticClass:"w-full my-8"},[n("Recover",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),n("div",{staticClass:"w-full p-4 border border-grey-light shadow-sm mt-6"},[n("p",[t._v("Already have a Ricocall account? "),n("button",{staticClass:"text-blue font-bold px-0",on:{click:function(e){return t.changeView("signin")}}},[t._v("To go login !")])])])],1):t._e()])])},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full flex flex-wrap p-4 border border-grey-light shadow-sm"},[n("InputWithIcon",{attrs:{id:"email",icon:"mail",label:"Insert your email",required:!0,type:"email",validation:t.user.validation("email")},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),n("InputWithIcon",{staticClass:"mt-4",attrs:{icon:"key",label:"Insert your password",type:"password",required:!0,validation:t.user.validation("password")},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),n("p",{staticClass:"w-full text-right"},[n("button",{staticClass:"button-sm text-blue font-bold px-0",on:{click:function(e){return t.$emit("input","recover")}}},[t._v(" Forgot your password? ")])]),n("button",{staticClass:"button bg-yellow mt-4",attrs:{disabled:!t.user.email||!t.user.password},on:{click:function(e){return t.login()}}},[t._v(" Sign In ")])],1)},l=[],c=n("5530"),u=(n("b0c0"),n("d4ec")),d=n("bee2"),f=n("262e"),m=n("2caf"),p=n("9242"),g=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u["a"])(this,n),t=e.call(this),t.id=o.id||null,t.name=o.name||"",t.email=o.email||"",t.password=o.password||"",t.password_confirmation=o.password_confirmation||"",t.created_at=o.created_at||"",t.updated_at=o.updated_at||"",t.isBlocked=o.isBlocked||!1,t}return Object(d["a"])(n,[{key:"requireds",get:function(){return[{item:"name",label:"name"},{item:"email",label:"email",validation:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!e.test(String(t).toLowerCase())}},{item:"password",label:"senha",validation:function(t){if(t.length<6)return!0}}]}},{key:"errorPhrase",get:function(){return{init:"Please check the information: ",end:" to procced"}}}]),n}(p),h=n("2f62"),v={name:"SignIn",data:function(){return{user:new g}},methods:Object(c["a"])(Object(c["a"])({},Object(h["b"])(["attemptUserLogin"])),{},{login:function(){var t=this.user,e=t.email,n=t.password;this.attemptUserLogin({email:e,password:n})}})},b=v,w=n("2877"),y=Object(w["a"])(b,r,l,!1,null,null,null),C=y.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full flex flex-wrap p-4 border border-grey-light shadow-sm"},[n("InputWithIcon",{attrs:{icon:"user",id:"username",label:"Insert your username",required:!0,validation:t.user.validation("name")},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}}),n("InputWithIcon",{staticClass:"mt-4",attrs:{icon:"mail",label:"Inser your email",required:!0,type:"email",validation:t.user.validation("email")},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),n("InputWithIcon",{staticClass:"mt-4",attrs:{icon:"key",label:"Password",type:"password",required:!0,validation:t.user.validation("password")},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.checkEmail()}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),n("p",{staticClass:"w-full text-right"},[n("button",{staticClass:"button-sm text-blue font-bold px-0",on:{click:function(e){return t.$emit("input","recover")}}},[t._v(" Forgot your password? ")])]),n("button",{staticClass:"button bg-yellow mt-4 hover:shadow-sm focus:outline-none focus:shadow",attrs:{disabled:t.user.hasError},on:{click:function(e){return t.checkEmail()}}},[t._v(" Sign Up ")])],1)},x=[],_={name:"SignUp",data:function(){return{user:new g}},methods:{checkEmail:function(){var t=this;this.$api.post("/user/auth/checkEmail",this.user).then((function(){t.$notifications.error("You already have an account, please login.")})).catch((function(){t.$store.dispatch("registerUser",{user:t.user}).then((function(t){var e=t.data;console.log(e)}))}))}}},U=_,j=Object(w["a"])(U,k,x,!1,null,null,null),L=j.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full flex flex-wrap p-4 border border-grey-light shadow-sm"},[n("InputWithIcon",{attrs:{id:"email",icon:"mail",label:"Insert your email",required:!0,type:"email",validation:t.user.validation("email")},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),n("button",{staticClass:"button bg-yellow mt-4",attrs:{disabled:!t.user.email},on:{click:function(e){return t.checkEmail()}}},[t._v(" Recover password ")])],1)},O=[],I={name:"SignIn",data:function(){return{user:new g}},methods:Object(c["a"])(Object(c["a"])({},Object(h["b"])(["attemptUserLogin"])),{},{checkEmail:function(){var t=this,e=this.user.email;this.$api.post("/user/auth/checkEmail",{email:e}).then((function(){t.$api.post("/user/auth/generateNewPassword",{email:e},{loader:!0}).then((function(){t.$notifications.info("We've sent you a new password"),t.$emit("input","signin")}))})).catch((function(){t.$notifications.error("We didn't found your email ".concat(e))}))}})},$=I,T=Object(w["a"])($,S,O,!1,null,null,null),A=T.exports,E={name:"Login",components:{SignIn:C,SignUp:L,Recover:A},data:function(){return{type:"signin"}},methods:{changeView:function(t){this.type=t,setTimeout((function(){"signin"==t?document.getElementById("email").focus():document.getElementById("username").focus()}),200)}}},P=E,M=Object(w["a"])(P,i,a,!1,null,null,null),D=M.exports,q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},N=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full p-6"},[n("h3",[n("span",{staticClass:"border-b-4 border-yellow"},[t._v("About")])]),n("div",{staticClass:"w-full flex justify-center"},[n("div",{staticClass:"w-full max-w-md"},[n("h4",{staticClass:"mt-6 mb-4"},[t._v("Hello there!")]),n("p",[t._v("Thanks for visiting my first ever aptitude test, created from scratch in 3 days for "),n("a",{attrs:{href:"https://ricochet360.com",target:"_blank"}},[t._v("Ricochet360")]),t._v(" developer position.")]),n("p",{staticClass:"mt-3"},[t._v("This application was made using "),n("a",{attrs:{href:"https://adonisjs.com",target:"_blank"}},[t._v("AdonisJS")]),t._v(" on the backend side and "),n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Vue.js")]),t._v(" for frontend application.")]),n("p",{staticClass:"mt-3"},[t._v("For the voice call service we had to use "),n("a",{attrs:{href:"https://twilio.com",target:"_blank"}},[t._v("Twilio")]),t._v(" services - this was one of the most important part of the project requirements, but i have to be honest with you, i was tempted to use native browser webRTC and libs like PeerJS to do this.")]),n("p",{staticClass:"mt-3"},[t._v("After the very first contact with the Twilio API i endup understanding the core of the service and i'm proud with the end results! This is my first time creating a voice chat application and it was great to do something cool like this! The Twilio provider is very interesting, i'm shure that nothing was lost, neither my mustache strands that fell on the way.")]),n("p",{staticClass:"mt-3"},[t._v("In the realtime side i decided to use "),n("a",{attrs:{href:"https://socket.io",target:"_blank"}},[t._v("Socket.io")]),t._v(", cause i already had some background with this tool and you may guess, the time was against me. But i believe that Twilio may have something that could help figure out if the user that we could chat are online or not.")]),n("p",{staticClass:"mt-3"},[t._v("And if you are a frontend dev like me, you may already know that this UI was made using "),n("a",{attrs:{href:"https://tailwindcss.com",target:"_blank"}},[t._v("TailwindCSS")]),t._v(" ;), thanks my buddy "),n("a",{attrs:{href:"https://matheuslima.dev",target:"_blank"}},[t._v("Matheus Lima")]),t._v(" to presented this guy to me and to contribute with "),n("a",{attrs:{href:"https://twitter.com/jotadepaula",target:"_blank"}},[t._v("@jotadepaula")]),t._v(" to figure out what is the best approach for online users feature.")]),n("p",{staticClass:"mt-3"},[t._v("I know, i know... What about the repository right? Yeah, i understand your frustration but i have to create some TDD before publishing the code base for your guys, my fault!")]),n("p",{staticClass:"mt-3"},[t._v("Thanks you all to be with me and sorry about my not so good english too.")])])])])}],R={name:"About"},F=R,W=Object(w["a"])(F,q,N,!1,null,null,null),H=W.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full h-full flex p-6 mt-20 md:mt-0"},[n("LastCalls")],1)},B=[],V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full flex flex-wrap justify-start items-start content-start"},[t._m(0),n("div",{staticClass:"w-full max-w-full overflow-x-auto"},[n("table",{staticClass:"w-full mt-4 "},[t._m(1),n("tbody",t._l(t.lastCalls,(function(e){return n("tr",{key:e.sid},[n("td",{staticClass:"p-2"},["inbound"==e.direction?n("img",{staticClass:"fill-current text-white",attrs:{src:"/incoming.svg",width:"24px"}}):n("img",{staticClass:"fill-current text-white",attrs:{src:"/outgoing.svg",width:"24px"}})]),n("td",{staticClass:"p-2"},[t._v(t._s(e.sid))]),n("td",{staticClass:"p-2"},[t._v(t._s(e.duration)+"s")]),n("td",{staticClass:"p-2"},[t._v(t._s(e.status))])])})),0)])])])},J=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"w-full"},[n("span",{staticClass:"border-b-4 border-yellow"},[t._v("Last calls")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("td",{staticClass:"p-2"},[t._v("Type")]),n("td",{staticClass:"p-2"},[t._v("sId")]),n("td",{staticClass:"p-2"},[t._v("Duration")]),n("td",{staticClass:"p-2"},[t._v("Status")])])])}],Y={name:"LastCalls",data:function(){return{lastCalls:[]}},mounted:function(){this.getLastCalls()},methods:{getLastCalls:function(){var t=this;this.$api.get("/twilio/getLastCalls").then((function(e){var n=e.data;t.lastCalls=n.calls}))}}},Z=Y,G=Object(w["a"])(Z,V,J,!1,null,null,null),K=G.exports,Q={name:"Home",components:{LastCalls:K}},X=Q,tt=Object(w["a"])(X,z,B,!1,null,null,null),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full flex flex-wrap p-6"},[t._m(0),n("div",{staticClass:"w-full"},[n("InputWithIcon",{staticClass:"mt-4",attrs:{icon:"key",label:"Twilio TwiML app router endpoint",type:"text"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}),n("button",{staticClass:"button bg-yellow mt-4",on:{click:function(e){return t.updateTwilioVoiceUrl()}}},[t._v(" Update ")])],1)])},ot=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",[n("span",{staticClass:"border-b-4 border-yellow"},[t._v("Settings")])])}],st={name:"ApplicationSettings",data:function(){return{url:"https://ricocall.igortrindade.dev/api/twilio/routeIncomingCall"}},methods:{updateTwilioVoiceUrl:function(){var t=this;this.$api.post("/twilio/updateApplicationVoiceUrl",{url:this.url},{loader:!0}).then((function(){t.$notifications.success("Twilio Voice Url successfully updated!")})).catch((function(){t.$notifications.error("Error while trying to update Twilio Voice Url")}))}}},it=st,at=Object(w["a"])(it,nt,ot,!1,null,null,null),rt=at.exports,lt=n("3bff"),ct=n("b048");o["a"].use(s["a"]);var ut=[{path:"/",name:"Login",component:D},{path:"/about",name:"About",component:H},{path:"/home",name:"Home",component:et,meta:{requireAuth:!0}},{path:"/settings",name:"Settings",component:rt,meta:{requireAuth:!0,role:"admin"}}],dt=new s["a"]({mode:"history",base:"/",routes:ut});dt.beforeEach((function(t,e,n){if(lt["a"].commit("setSideMenuIsOpen",!1),t.meta.requireAuth){if(!lt["a"].getters.getterLoggedUser)return Object(ct["d"])("Please sign in again!"),void dt.push("/",(function(){}));if("admin"===t.meta.role&&!lt["a"].getters.getterLoggedUser.isAdmin)return Object(ct["d"])("You don't have permission to access this resource"),void dt.push("/home",(function(){}))}n()}));e["a"]=dt},b048:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return u}));var o=n("d4ec"),s=n("ade3"),i=n("2685"),a=n.n(i),r=function t(){Object(o["a"])(this,t),Object(s["a"])(this,"success",l),Object(s["a"])(this,"error",c),Object(s["a"])(this,"warning",u),Object(s["a"])(this,"info",d)},l=function(t){a.a.show({class:"custom-notify",position:t.position||"bottomRight",title:t.title||"",message:"string"==typeof t?t:t.message||"",theme:"dark",color:"#03DFAE",titleColor:"#000",messageColor:"#000",iconColor:"#000",progressBarColor:"#000",timeout:3e3,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"bounceInLeft",transitionInMobile:"bounceInLeft"})},c=function(t){a.a.show({class:"custom-notify",position:t.position||"bottomRight",title:t.title||"",message:"string"==typeof t?t:t.message||"",theme:"dark",color:"#ff0f4a",titleColor:"#fff",messageColor:"#fff",iconColor:"#fff",progressBarColor:"#fff",timeout:3e3,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"bounceInLeft",transitionInMobile:"bounceInLeft"})},u=function(t){a.a.show({class:"custom-notify",position:t.position||"bottomRight",title:t.title||"",message:"string"==typeof t?t:t.message||"",color:"#FFC400",titleColor:"#22292F",messageColor:"#22292F",iconColor:"#22292F",progressBarColor:"#22292F",timeout:3e3,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"bounceInLeft",transitionOut:"fadeOut",transitionInMobile:"bounceInLeft",transitionOutMobile:"fadeOutDown"})},d=function(t){a.a.show({class:"custom-notify",position:t.position||"bottomRight",title:t.title||"",message:"string"==typeof t?t:t.message||"",theme:"dark",color:"#270E66",titleColor:"#fff",messageColor:"#fff",iconColor:"#fff",progressBarColor:"#fff",timeout:3e3,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"bounceInLeft",transitionInMobile:"bounceInLeft"})}},b4ad:function(t,e,n){},fae1:function(t,e,n){"use strict";n("d3b7");var o=n("bc3a"),s=n.n(o),i=n("3bff"),a=n("b048");s.a.defaults.baseURL="https://ricocall.igortrindade.dev/api",s.a.defaults.headers.common["Content-Type"]="application/json",s.a.defaults.headers.common["Accept"]="application/json",s.a.interceptors.request.use((function(t){return i["a"].getters.getterLoggedUserToken&&!t.crossDomain&&(t.headers.authorization="Bearer ".concat(i["a"].getters.getterLoggedUserToken)),t.loader&&i["a"].dispatch("setLoaderShow",!0),t}),(function(t){return Promise.reject(t)})),s.a.interceptors.response.use((function(t){return t.config.loader&&i["a"].dispatch("setLoaderShow",!1),t}),(function(t){return setTimeout((function(){i["a"].dispatch("resetLoader")}),2500),t.response&&t.response.status&&401===t.response.status&&(Object(a["d"])("You don't have permission to access this resource"),i["a"].dispatch("logoutUser")),Promise.reject(t)})),e["a"]=s.a}});
//# sourceMappingURL=app.b00e67d3.js.map