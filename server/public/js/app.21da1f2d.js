(function(e){function t(t){for(var o,r,a=t[0],c=t[1],l=t[2],d=0,f=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={app:0},s=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},1:function(e,t){},"16a3":function(e,t,n){"use strict";n("2e29")},"2c93":function(e,t,n){"use strict";n("2fef")},"2e29":function(e,t,n){},"2fef":function(e,t,n){},"3bff":function(e,t,n){"use strict";var o=n("0e44"),i=n("2b0e"),s=n("2f62"),r={loggedUser:null,loggedUserType:null,loggedUserToken:null},a={getterLoggedUser:function(e){return e.loggedUser},getterLoggedUserType:function(e){return e.loggedUserType},getterLoggedUserToken:function(e){return e.loggedUserToken}},c=(n("b0c0"),n("d3b7"),n("ac1f"),n("3ca3"),n("841c"),n("ddb0"),n("2b3d"),n("fae1")),l=n("b048"),u=n("a18c"),d={attemptUserLogin:function(e,t){var n=t.email,o=t.password;c["a"].post("/user/auth/login",{email:n,password:o},{loader:!0}).then((function(t){var n=t.data.token;e.commit("setLoggedUserToken",{token:n}),e.dispatch("getLoggedUser",{})})).catch((function(e){e.response&&401==e.response.status?Object(l["b"])("Ops, check your credentials..."):Object(l["b"])("Ops, something goes wrong with this app!")}))},getLoggedUser:function(e,t){var n=t.redirect,o=void 0===n||n;c["a"].get("/user/auth/getLoggedUser").then((function(t){var n=t.data,i=n.user;if(e.commit("setLoggedUser",{user:i}),Object(l["c"])("Welcome ".concat(i.name," !")),e.dispatch("setupTwilioDevice"),o){var s=new URLSearchParams(window.location.search),r=s.get("redirectTo");r?u["a"].push(r,(function(){})):u["a"].push("/home",(function(){}))}})).catch((function(t){t.response&&403==t.response.status?(Object(l["b"])("Sorry, it's seems that somebody blocked you :/"),e.dispatch("logoutUser",{showNotification:!1})):Object(l["b"])("Ops, something did wrong with this app, comeback later!")}))},registerUser:function(e,t){var n=t.user;c["a"].post("/user/auth/register",n,{loader:!0}).then((function(t){var n=t.data.token;e.commit("setLoggedUserToken",{token:n}),e.dispatch("getLoggedUser",{})})).catch((function(){Object(l["b"])("Erro ao cadastrar, verifique os dados.")}))},logoutUser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.showNotification,o=void 0===n||n;i["a"].prototype.$socket.emit("leaveRoom",{userId:e.getters.getterLoggedUser.id}),e.commit("setLogout"),o&&Object(l["c"])("Successfully logout"),u["a"].push("/",(function(){})),e.dispatch("destroyTwilioDevice")}},f={setLoggedUserToken:function(e,t){var n=t.type,o=t.token;e.loggedUserType=n,e.loggedUserToken=o},setLoggedUser:function(e,t){var n=t.user;e.loggedUser=n},setLogout:function(e){e.loggedUser=null,e.loggedUserToken=null,e.loggedUserType=null}},m={state:r,getters:a,actions:d,mutations:f},p={loaderShow:!1,loaderInstances:0},g={getterLoaderShow:function(e){return e.loaderShow},getterLoaderInstances:function(e){return e.loaderInstances}},h={setLoaderShow:function(e,t){if(t){var n=e.getters.getterLoaderInstances,o=n+1;e.commit("setLoaderShow",{loaderShow:!0,loaderInstances:o})}else e.dispatch("setLoaderOff")},setLoaderOff:function(e){setTimeout((function(){var t=e.getters.getterLoaderInstances;if(1===t)e.commit("setLoaderShow",{loaderShow:!1,loaderInstances:0});else{var n=t-1;e.commit("setLoaderShow",{loaderShow:!0,loaderInstances:n})}}),500)},resetLoader:function(e){e.commit("resetLoader")}},b={setLoaderShow:function(e,t){var n=t.loaderShow,o=t.loaderInstances;e.loaderShow=n,e.loaderInstances=o},resetLoader:function(e){e.loaderShow=!1,e.loaderInstances=0}},v={state:p,getters:g,actions:h,mutations:b},w={activeConnection:null,activeConnectionStatus:null,activeConnectionType:null,activeConnectionFromUserName:null,activeConnectionToUserName:null},y={getterActiveConnection:function(e){return e.activeConnection},getterActiveConnectionStatus:function(e){return e.activeConnectionStatus},getterActiveConnectionType:function(e){return e.activeConnectionType},getterActiveConnectionFromUserName:function(e){return e.activeConnectionFromUserName},getterActiveConnectionToUserName:function(e){return e.activeConnectionToUserName}},C=(n("4160"),n("159b"),n("2909")),k=n("e736"),x=n("5c7d");Object(x["getLogger"])(k["Device"].packageName);var U={setupTwilioDevice:function(e){e.commit("setActiveConnection",null),c["a"].get("/twilio/token").then((function(t){var n=t.data,o=n.token;k["Device"].setup(o),k["Device"].on("ready",(function(){console.log("Twilio Ready")})),k["Device"].on("error",(function(e){console.log("Error: "+e.message)})),k["Device"].on("incoming",(function(t){Object(C["a"])(t.customParameters.entries()).forEach((function(t){"fromUserName"==t[0]&&e.commit("setActiveConnectionFromUserName",t[1]),"toUserName"==t[0]&&e.commit("setActiveConnectionToUserName",t[1])})),e.commit("setActiveConnection",t),e.commit("setActiveConnectionStatus",t.status()),e.commit("setActiveConnectionType","incoming"),i["a"].prototype.$socket.emit("updateUserStatus",{userId:e.getters.getterLoggedUser.id,status:"busy"}),e.dispatch("warmupConnection",t)})),k["Device"].on("offline",(function(){e.dispatch("setupTwilioDevice")})),k["Device"].on("disconnect",(function(){i["a"].prototype.$socket.emit("updateUserStatus",{userId:e.getters.getterLoggedUser.id,status:"online"})}))}))},destroyTwilioDevice:function(){k["Device"].destroy()},makeTwilioCall:function(e,t){var n=t.user,o=k["Device"].connect({From:e.getters.getterLoggedUser.id,To:n.id});console.log(o),e.commit("setActiveConnection",o),e.commit("setActiveConnectionStatus",o.status()),e.commit("setActiveConnectionType","outgoing"),e.commit("setActiveConnectionToUserName",n.name),i["a"].prototype.$socket.emit("updateUserStatus",{userId:e.getters.getterLoggedUser.id,status:"busy"}),e.dispatch("warmupConnection",o)},warmupConnection:function(e,t){t.on("cancel",(function(){e.dispatch("clearConnection")})),t.on("disconnect",(function(){i["a"].prototype.$notifications.error("Call ended"),"outgoing"==e.getters.getterActiveConnectionType&&e.dispatch("clearConnection")})),t.on("error",(function(){e.dispatch("clearConnection")})),t.on("hangup",(function(){e.dispatch("clearConnection")})),t.on("reject",(function(){e.dispatch("clearConnection")})),t.on("transportClose",(function(){e.dispatch("clearConnection")})),t.on("accept",(function(){e.commit("setActiveConnection",t),e.commit("setActiveConnectionStatus",t.status())}))},clearConnection:function(e){e.commit("setActiveConnection",null),e.commit("setActiveConnectionStatus",null),e.commit("setActiveConnectionType",null),i["a"].prototype.$socket.emit("updateUserStatus",{userId:e.getters.getterLoggedUser.id,status:"online"})},acceptCall:function(e){e.getters.getterActiveConnection.accept(),i["a"].prototype.$notifications.success("Call accepted")},rejectIncomingCall:function(e){e.getters.getterActiveConnection.reject(),k["Device"].disconnectAll(),e.commit("setActiveConnection",null),e.commit("setActiveConnectionStatus",null),i["a"].prototype.$socket.emit("updateUserStatus",{userId:e.getters.getterLoggedUser.id,status:"online"})},disconnectConnection:function(e){k["Device"].disconnectAll(),e.commit("setActiveConnection",null),e.commit("setActiveConnectionStatus",null),i["a"].prototype.$socket.emit("updateUserStatus",{userId:e.getters.getterLoggedUser.id,status:"online"})}},j={setActiveConnection:function(e,t){e.activeConnection=t},setActiveConnectionStatus:function(e,t){e.activeConnectionStatus=t},setActiveConnectionType:function(e,t){e.activeConnectionType=t},setActiveConnectionFromUserName:function(e,t){e.activeConnectionFromUserName=t},setActiveConnectionToUserName:function(e,t){e.activeConnectionToUserName=t}},O={state:w,getters:y,actions:U,mutations:j};i["a"].use(s["a"]);var _=new s["a"].Store({modules:{auth:m,general:v,caller:O},plugins:[Object(o["a"])({key:"ricocall"})]});t["a"]=_},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full block m-auto h-screen overflow-y-auto bg-blue p-3 md:p-10",attrs:{id:"app"}},[n("div",{staticClass:"w-full shadow-md flex h-full relative"},[n("SideMenu"),n("div",{staticClass:" w-full h-full overflow-y-auto  flex flex-wrap bg-white"},[n("MainHeader"),n("router-view")],1)],1),n("Loader")],1)},s=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-blue side-menu-container items-start md:h-full max-w-full md:max-w-1/3 absolute md:static bg-grey-light p-6  shadow-sm z-10 flex flex-wrap",class:[e.sideMenuIsOpen?"h-full menu-open w-full":""]},[e.sideMenuIsOpen?n("button",{staticClass:"cursor-pointer focus:outline-none flex text-black",attrs:{"aria-label":"Close side menu"},on:{click:function(t){return e.close()}}},[n("feather",{attrs:{type:"x",size:"28"}})],1):n("button",{staticClass:"cursor-pointer focus:outline-none flex text-black",attrs:{"aria-label":"open side menu"},on:{click:function(t){e.sideMenuIsOpen=!0}}},[n("feather",{attrs:{type:"menu"}})],1),n("div",{staticClass:"side-menu-content h-full w-full flex"},[e.sideMenuIsOpen?n("div",{staticClass:"w-full flex flex-col h-full"},[n("router-link",{staticClass:"inline-block w-full flex items-center justify-center",attrs:{to:"/"}},[n("img",{attrs:{src:"/logo.svg",width:"128px",alt:"Ricocall Logo"}})]),e.$store.getters.getterLoggedUser?n("div",{staticClass:"flex max-h-full overflow-y-auto mb-4"},[n("UserList")],1):e._e()],1):e._e()])])},a=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full flex flex-wrap"},[e._m(0),e._l(e.sortedUserList,(function(t){return n("div",{key:t.id,staticClass:"w-full"},[n("button",{staticClass:"button bg-white shadow-sm flex justify-center w-full rounded-full text-blue mb-3 text-sm",on:{click:function(n){return e.checkCall(t)}}},[n("span",{staticClass:"w-3/4 max-w-3/4 ellipsis text-left"},[e._v(e._s(t.name))]),n("span",{staticClass:"text-xs ml-2",class:[e.getUserStatusClass(e.checkUserStatus(t))]},[e._v(e._s(e.checkUserStatus(t)))])])])}))],2)},l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h4",{staticClass:"w-full mb-4"},[n("span",{staticClass:"border-b-4 border-yellow"},[e._v("Contacts")])])}],u=(n("c975"),n("fb6a"),n("b0c0"),n("5530")),d=(n("4de4"),n("b64b"),function(e,t){for(var n=0;n<e.length;n++){var o=Object.keys(t).filter((function(o){return t[o]===e[n][o]}));if(o.length===Object.keys(t).length)return e[n]}return!1}),f=n("2f62"),m={name:"UserList",data:function(){return{users:[],onlineUsers:[]}},mounted:function(){var e=this;this.getUsers(),this.joinSocketRoom(),this.$socket.on("onlineUsers",(function(t){var n=t.onlineUsers;e.onlineUsers=n}))},computed:{sortedUserList:function(){var e=this,t=["online","busy","offline"];return this.users.slice().sort((function(n,o){return t.indexOf(e.checkUserStatus(n))-t.indexOf(e.checkUserStatus(o))}))}},methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["makeTwilioCall"])),{},{getUsers:function(){var e=this;this.$api.get("/users/get").then((function(t){var n=t.data;e.users=n.users}))},joinSocketRoom:function(){this.$socket.emit("joinRoom",{userId:this.$store.getters.getterLoggedUser.id})},checkUserStatus:function(e){var t=d(this.onlineUsers,{userId:e.id});return t?t.status:"offline"},getUserStatusClass:function(e){return"busy"==e?"text-blue":"online"==e?"text-green":"text-grey"},checkCall:function(e){this.$store.getters.getterActiveConnection||("busy"!==this.checkUserStatus(e)?"offline"!==this.checkUserStatus(e)?this.makeTwilioCall({user:e}):this.$notifications.warning("".concat(e.name," is offline, call again later!")):this.$notifications.warning("".concat(e.name," is busy, call again later!")))}})},p=m,g=n("2877"),h=Object(g["a"])(p,c,l,!1,null,null,null),b=h.exports,v={name:"SideMenu",components:{UserList:b},data:function(){return{sideMenuIsOpen:!1}},mounted:function(){window.innerWidth>798&&(this.sideMenuIsOpen=!0)},methods:{close:function(){this.sideMenuIsOpen&&(this.sideMenuIsOpen=!1)}}},w=v,y=(n("2c93"),Object(g["a"])(w,r,a,!1,null,null,null)),C=y.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.getters.getterLoggedUser?n("div",{staticClass:"w-full flex justify-end p-4 w-full h-16"},[n("router-link",{staticClass:"button-sm flex items-center text-grey hover:text-black",class:["Home"==e.$route.name?"border-b-4 border-yellow text-black":""],attrs:{to:{name:"Home"},"aria-label":"logout"},on:{click:function(t){return e.logout()}}},[e._v(" Home ")]),n("router-link",{staticClass:"button-sm flex items-center text-grey hover:text-black",class:["Settings"==e.$route.name?"border-b-4 border-yellow text-black":""],attrs:{to:{name:"Settings"},"aria-label":"logout"},on:{click:function(t){return e.logout()}}},[e._v(" Settings ")]),n("button",{staticClass:"button-sm flex items-center text-grey hover:text-black",attrs:{"aria-label":"logout"},on:{click:function(t){return e.logout()}}},[e._v(" "+e._s(e.$store.getters.getterLoggedUser.name)+" logout ")])],1):e._e()},x=[],U={name:"Header",methods:Object(u["a"])(Object(u["a"])({},Object(f["b"])(["logoutUser"])),{},{logout:function(){this.logoutUser()}})},j=U,O=Object(g["a"])(j,k,x,!1,null,null,null),_=O.exports,I={name:"App",components:{SideMenu:C,MainHeader:_}},L=I,S=(n("034f"),Object(g["a"])(L,i,s,!1,null,null,null)),$=S.exports,T=n("a18c"),A=n("3bff");n("8af5"),n("7766"),A["a"].dispatch("resetLoader"),A["a"].getters.getterLoggedUser&&A["a"].dispatch("getLoggedUser",{loader:!0}),new o["a"]({router:T["a"],store:A["a"],render:function(e){return e($)}}).$mount("#app")},"74ae":function(e,t,n){"use strict";n("b4ad")},7766:function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),i=n("8055"),s=n.n(i);t["default"]=function(){var e=s()("https://ricocall.igortrindade.dev",{reconnectionDelay:2e3,reconnectionDelayMax:5e3,reconnectionAttempts:20});e.on("connect",(function(){console.log("Socket successfully connected")})),o["a"].prototype.$socket=e}()},"85ec":function(e,t,n){},"8af5":function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),i=n("62ad"),s=n.n(i),r=n("fae1"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full h-full absolute inset-0 z-50 my-auto bg-smoke flex items-center justify-center loader",class:[e.getterLoaderShow?"flex":"hidden"],attrs:{id:"loader"}},[n("div",{staticClass:"spinnerx"})])},c=[],l=n("5530"),u=n("2f62"),d={name:"Loader",computed:Object(l["a"])({},Object(u["c"])(["getterLoaderShow"]))},f=d,m=(n("74ae"),n("2877")),p=Object(m["a"])(f,a,c,!1,null,null,null),g=p.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block w-full mt-2"},[e.label?n("label",{staticClass:"block mb-2",attrs:{for:e.getId}},[n("span",{staticClass:"border-b-2 border-yellow"},[e._v(e._s(e.label))])]):e._e(),n("div",{staticClass:"relative check-input"},[n("input",{staticClass:"block appearance-none outline-none w-full h-full border-2 border-grey-medium focus:border-yellow bg-grey-light text-grey-darker text-lg py-2 pr-4 pl-10",class:{"border-red":e.validation.filled&&e.validation.hasError},attrs:{id:e.getId,type:e.getType,placeholder:e.label,autocapitalize:e.autocapitalize,required:e.required,"aria-required":e.required,"aria-labelledby":"#id","aria-invalid":e.validation.hasError},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.makeAction()}}}),n("div",{staticClass:"text-black icon-highlight h-full absolute pin-y top-0 flex items-center text-grey pointer-events-none pl-2"},[n("feather",{staticClass:"icon-highlight",attrs:{type:e.icon}})],1),"password"===e.type?n("button",{staticClass:"h-full absolute pin-y top-0 right-0 mr-3 flex items-center text-grey pl-2 text-black hover:shadow-sm focus:outline-none focus:shadow",on:{click:function(t){e.showPassword=!e.showPassword}}},[n("feather",{attrs:{type:e.showPassword?"eye-off":"eye",size:"18"}})],1):e._e()])])},b=[],v=(n("ac1f"),n("5319"),{name:"InputWithIcon",props:{icon:{type:String,default:"plus"},type:{type:String,default:"text"},placeholder:{type:String,default:""},value:{required:!0},id:{required:!1},label:{type:String,default:""},action:{type:Function,required:!1},autocapitalize:{type:String,default:"sentences"},required:{type:Boolean,default:!1},validation:{type:Object,default:function(){return{hasError:!1,checked:!1}}}},data:function(){return{showPassword:!1}},computed:{getId:function(){return this.id?this.id:this.label.replace(/[^\w\s]/gi,"").toLowerCase()},getType:function(){return"password"!==this.type?this.type:"password"===this.type&&this.showPassword?"text":this.type}},methods:{change:function(){this.$emit("input",this.value)},makeAction:function(){this.action&&"function"==typeof this.action&&this.action()}}}),w=v,y=(n("16a3"),Object(m["a"])(w,h,b,!1,null,null,null)),C=y.exports,k=n("b048");t["default"]=function(){o["a"].config.productionTip=!1,o["a"].prototype.$api=r["a"],o["a"].prototype.$notifications=new k["a"],o["a"].use(s.a),o["a"].component("InputWithIcon",C),o["a"].component("Loader",g),o["a"].directive("click-outside",{bind:function(e,t,n){e.clickOutsideEvent=function(o){e==o.target||e.contains(o.target)||n.context[t.expression](o)},document.body.addEventListener("click",e.clickOutsideEvent)},unbind:function(e){document.body.removeEventListener("click",e.clickOutsideEvent)}})}()},9242:function(e,t,n){n("99af"),n("4de4"),n("a15b"),n("d81d");var o,i=n("7037"),s=n("970b"),r=n("5bc3"),a=n("9523"),c=(o=function(){"use strict";function e(){var t=this;s(this,e),a(this,"validation",(function(e){return t[e].length?t.errors.filter((function(t){return t.item==e})).length?{hasError:!0,checked:!1,filled:!0}:{hasError:!1,checked:!0,filled:!0}:{hasError:!0,checked:!1,filled:!1}}))}return r(e,[{key:"errors",get:function(){var e=this;return this.requireds.filter((function(t){if("boolean"!=typeof e[t.item]||e[t.item])return"function"==typeof t.validation?t.validation(e[t.item],e):"string"==typeof e[t.item]&&!e[t.item].length||Array.isArray(e[t.item])&&!e[t.item].length||"object"==i(e[t.item])&&!e[t.item]?t:void 0}))}},{key:"hasError",get:function(){return!!this.errors.length}},{key:"errorPhrase",get:function(){return{init:"Please, check this information ",end:" to procceed."}}},{key:"validationPhrase",get:function(){return this.errorPhrase.init+this.errors.map((function(e){return e.label})).join(", ")+this.errorPhrase.end}},{key:"validationPhraseHtml",get:function(){return"".concat(this.errorPhrase.init," <b>").concat(this.errors.map((function(e){return e.label})).join(", "),"</b> ").concat(this.errorPhrase.end)}}]),e}(),o);e.exports=c},a18c:function(e,t,n){"use strict";var o=n("2b0e"),i=n("8c4f"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full h-3/4 flex flex-wrap items-center justify-center"},[n("div",{staticClass:"w-full max-w-sm flex flex-wrap justify-center p-4"},[n("img",{attrs:{src:"/logo.svg",width:"144px",alt:"Ricocall Logo"}}),"signin"==e.type?n("div",{staticClass:"w-full my-8"},[n("SignIn",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),n("div",{staticClass:"w-full p-4 border border-grey-light shadow-sm mt-6"},[n("p",[e._v("New to Ricocall? "),n("button",{staticClass:"text-blue font-bold",on:{click:function(t){return e.changeView("signup")}}},[e._v("Create an account !")])])])],1):e._e(),"signup"==e.type?n("div",{staticClass:"w-full my-8"},[n("SignUp",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),n("div",{staticClass:"w-full p-4 border border-grey-light shadow-sm mt-6"},[n("p",[e._v("Already have a Ricocall account? "),n("button",{staticClass:"text-blue font-bold px-0",on:{click:function(t){return e.changeView("signin")}}},[e._v("To go login !")])])])],1):e._e(),"recover"==e.type?n("div",{staticClass:"w-full my-8"},[n("Recover",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),n("div",{staticClass:"w-full p-4 border border-grey-light shadow-sm mt-6"},[n("p",[e._v("Already have a Ricocall account? "),n("button",{staticClass:"text-blue font-bold px-0",on:{click:function(t){return e.changeView("signin")}}},[e._v("To go login !")])])])],1):e._e()])])},r=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full flex flex-wrap p-4 border border-grey-light shadow-sm"},[n("InputWithIcon",{attrs:{id:"email",icon:"mail",label:"Insert your email",required:!0,type:"email",validation:e.user.validation("email")},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),n("InputWithIcon",{staticClass:"mt-4",attrs:{icon:"key",label:"Insert your password",type:"password",required:!0,validation:e.user.validation("password")},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),n("p",{staticClass:"w-full text-right"},[n("button",{staticClass:"button-sm text-blue font-bold px-0",on:{click:function(t){return e.$emit("input","recover")}}},[e._v(" Forgot your password? ")])]),n("button",{staticClass:"button bg-yellow mt-4",attrs:{disabled:!e.user.email||!e.user.password},on:{click:function(t){return e.login()}}},[e._v(" Sign In ")])],1)},c=[],l=n("5530"),u=(n("b0c0"),n("d4ec")),d=n("bee2"),f=n("262e"),m=n("2caf"),p=n("9242"),g=function(e){Object(f["a"])(n,e);var t=Object(m["a"])(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u["a"])(this,n),e=t.call(this),e.id=o.id||null,e.name=o.name||"",e.email=o.email||"",e.password=o.password||"",e.password_confirmation=o.password_confirmation||"",e.created_at=o.created_at||"",e.updated_at=o.updated_at||"",e.isBlocked=o.isBlocked||!1,e}return Object(d["a"])(n,[{key:"requireds",get:function(){return[{item:"name",label:"name"},{item:"email",label:"email",validation:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!t.test(String(e).toLowerCase())}},{item:"password",label:"senha",validation:function(e){if(e.length<6)return!0}}]}},{key:"errorPhrase",get:function(){return{init:"Please check the information: ",end:" to procced"}}}]),n}(p),h=n("2f62"),b={name:"SignIn",data:function(){return{user:new g}},methods:Object(l["a"])(Object(l["a"])({},Object(h["b"])(["attemptUserLogin"])),{},{login:function(){var e=this.user,t=e.email,n=e.password;this.attemptUserLogin({email:t,password:n})}})},v=b,w=n("2877"),y=Object(w["a"])(v,a,c,!1,null,null,null),C=y.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full flex flex-wrap p-4 border border-grey-light shadow-sm"},[n("InputWithIcon",{attrs:{icon:"user",id:"username",label:"Insert your username",required:!0,validation:e.user.validation("name")},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),n("InputWithIcon",{staticClass:"mt-4",attrs:{icon:"mail",label:"Inser your email",required:!0,type:"email",validation:e.user.validation("email")},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),n("InputWithIcon",{staticClass:"mt-4",attrs:{icon:"key",label:"Password",type:"password",required:!0,validation:e.user.validation("password")},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkEmail()}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),n("p",{staticClass:"w-full text-right"},[n("button",{staticClass:"button-sm text-blue font-bold px-0",on:{click:function(t){return e.$emit("input","recover")}}},[e._v(" Forgot your password? ")])]),n("button",{staticClass:"button bg-yellow mt-4 hover:shadow-sm focus:outline-none focus:shadow",attrs:{disabled:e.user.hasError},on:{click:function(t){return e.checkEmail()}}},[e._v(" Sign Up ")])],1)},x=[],U={name:"SignUp",data:function(){return{user:new g}},methods:{checkEmail:function(){var e=this;this.$api.post("/user/auth/checkEmail",this.user).then((function(){e.$notifications.error("You already have an account, please login.")})).catch((function(){e.$store.dispatch("registerUser",{user:e.user}).then((function(e){var t=e.data;console.log(t)}))}))}}},j=U,O=Object(w["a"])(j,k,x,!1,null,null,null),_=O.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full flex flex-wrap p-4 border border-grey-light shadow-sm"},[n("InputWithIcon",{attrs:{id:"email",icon:"mail",label:"Insert your email",required:!0,type:"email",validation:e.user.validation("email")},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),n("button",{staticClass:"button bg-yellow mt-4",attrs:{disabled:!e.user.email},on:{click:function(t){return e.checkEmail()}}},[e._v(" Recover password ")])],1)},L=[],S={name:"SignIn",data:function(){return{user:new g}},methods:Object(l["a"])(Object(l["a"])({},Object(h["b"])(["attemptUserLogin"])),{},{checkEmail:function(){var e=this,t=this.user.email;this.$api.post("/user/auth/checkEmail",{email:t}).then((function(){e.$api.post("/user/auth/generateNewPassword",{email:t},{loader:!0}).then((function(){e.$notifications.info("We've sent you a new password"),e.$emit("input","signin")}))})).catch((function(){e.$notifications.error("We didn't found your email ".concat(t))}))}})},$=S,T=Object(w["a"])($,I,L,!1,null,null,null),A=T.exports,E={name:"Login",components:{SignIn:C,SignUp:_,Recover:A},data:function(){return{type:"signin"}},methods:{changeView:function(e){this.type=e,setTimeout((function(){"signin"==e?document.getElementById("email").focus():document.getElementById("username").focus()}),200)}}},P=E,M=Object(w["a"])(P,s,r,!1,null,null,null),N=M.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full h-full flex items-center justify-center"},[n("h1",[e._v("Home")]),n("Caller")],1)},D=[],R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.getters.getterActiveConnection?n("div",{staticClass:"w-full h-full absolute inset-0 z-50 my-auto bg-smoke flex items-center justify-center loader p-8"},["incoming"==e.$store.getters.getterActiveConnectionType?n("div",{staticClass:"w-full h-3/4 max-w-md flex flex-col items-center justify-around"},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/incoming.svg",width:"198px"}}),n("div",{staticClass:"w-full max-w-sm my-6"},[n("h1",{staticClass:"w-full text-center text-white"},[e._v(e._s(e.$store.getters.getterActiveConnectionFromUserName))])]),n("div",{staticClass:"w-full max-w-sm flex justify-around"},[n("button",{staticClass:"bg-red p-6 text-white rounded-full",on:{click:function(t){return e.rejectIncomingCall()}}},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/call.svg",width:"44px"}})]),"open"!=e.$store.getters.getterActiveConnectionStatus?n("button",{staticClass:"bg-green p-6 text-white rounded-full",on:{click:function(t){return e.acceptCall()}}},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/call.svg",width:"44px"}})]):e._e()])]):n("div",{staticClass:"w-full h-3/4 max-w-md flex flex-col items-center justify-around"},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/outgoing.svg",width:"198px"}}),n("div",{staticClass:"w-full max-w-sm my-6"},[n("h1",{staticClass:"w-full text-center text-white"},[e._v(e._s(e.$store.getters.getterActiveConnectionToUserName))])]),n("div",{staticClass:"w-full max-w-sm flex justify-around"},[n("button",{staticClass:"bg-red p-6 text-white rounded-full",on:{click:function(t){return e.rejectIncomingCall()}}},[n("img",{staticClass:"fill-current text-white",attrs:{src:"/call.svg",width:"44px"}})])])])]):e._e()},F=[],W={name:"Caller",data:function(){return{}},mounted:function(){},methods:Object(l["a"])({},Object(h["b"])(["disconnectConnection","rejectIncomingCall","acceptCall"]))},z=W,B=Object(w["a"])(z,R,F,!1,null,null,null),H=B.exports,V={name:"Home",components:{Caller:H}},J=V,Z=Object(w["a"])(J,q,D,!1,null,null,null),Y=Z.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full h-3/4 flex  justify-center p-6"},[n("div",{staticClass:"w-full max-w-sm justify-center p-4 w-full border border-grey-light shadow-sm mt-6"},[n("h2",[e._v("Application Settings")]),n("InputWithIcon",{staticClass:"mt-4",attrs:{icon:"key",label:"Twilio TwiML app router endpoint",type:"text"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),n("button",{staticClass:"button bg-yellow mt-4",on:{click:function(t){return e.updateTwilioVoiceUrl()}}},[e._v(" Update ")])],1)])},K=[],Q={name:"ApplicationSettings",data:function(){return{url:"https://ricocall.igortrindade.dev/api/twilio/routeIncomingCall"}},methods:{updateTwilioVoiceUrl:function(){var e=this;this.$api.post("/twilio/updateApplicationVoiceUrl",{url:this.url},{loader:!0}).then((function(){e.$notifications.success("Twilio Voice Url successfully updated!")})).catch((function(){e.$notifications.error("Error while trying to update Twilio Voice Url")}))}}},X=Q,ee=Object(w["a"])(X,G,K,!1,null,null,null),te=ee.exports,ne=n("3bff"),oe=n("b048");o["a"].use(i["a"]);var ie=[{path:"/",name:"Login",component:N},{path:"/home",name:"Home",component:Y,meta:{requireAuth:!0}},{path:"/settings",name:"Settings",component:te,meta:{requireAuth:!0}}],se=new i["a"]({mode:"history",base:"/",routes:ie});se.beforeEach((function(e,t,n){if(setTimeout((function(){window.scrollTo(0,0);var e=document.getElementById("main-content");e&&(e.scrollTop=0)}),200),e.meta.requireAuth&&!ne["a"].getters.getterLoggedUser)return Object(oe["d"])("Please sign in again!"),void se.push("/",(function(){}));n()}));t["a"]=se},b048:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u}));var o=n("d4ec"),i=n("ade3"),s=n("2685"),r=n.n(s),a=function e(){Object(o["a"])(this,e),Object(i["a"])(this,"success",c),Object(i["a"])(this,"error",l),Object(i["a"])(this,"warning",u),Object(i["a"])(this,"info",d)},c=function(e){r.a.show({class:"custom-notify",position:e.position||"bottomRight",title:e.title||"",message:"string"==typeof e?e:e.message||"",theme:"dark",color:"#03DFAE",titleColor:"#000",messageColor:"#000",iconColor:"#000",progressBarColor:"#000",timeout:3e3,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"bounceInLeft",transitionInMobile:"bounceInLeft"})},l=function(e){r.a.show({class:"custom-notify",position:e.position||"bottomRight",title:e.title||"",message:"string"==typeof e?e:e.message||"",theme:"dark",color:"#ff0f4a",titleColor:"#fff",messageColor:"#fff",iconColor:"#fff",progressBarColor:"#fff",timeout:3e3,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"bounceInLeft",transitionInMobile:"bounceInLeft"})},u=function(e){r.a.show({class:"custom-notify",position:e.position||"bottomRight",title:e.title||"",message:"string"==typeof e?e:e.message||"",color:"#FFC400",titleColor:"#22292F",messageColor:"#22292F",iconColor:"#22292F",progressBarColor:"#22292F",timeout:3e3,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"bounceInLeft",transitionOut:"fadeOut",transitionInMobile:"bounceInLeft",transitionOutMobile:"fadeOutDown"})},d=function(e){r.a.show({class:"custom-notify",position:e.position||"bottomRight",title:e.title||"",message:"string"==typeof e?e:e.message||"",theme:"dark",color:"#270E66",titleColor:"#fff",messageColor:"#fff",iconColor:"#fff",progressBarColor:"#fff",timeout:3e3,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"bounceInLeft",transitionInMobile:"bounceInLeft"})}},b4ad:function(e,t,n){},fae1:function(e,t,n){"use strict";n("d3b7");var o=n("bc3a"),i=n.n(o),s=n("3bff");i.a.defaults.baseURL="https://ricocall.igortrindade.dev/api",i.a.defaults.headers.common["Content-Type"]="application/json",i.a.defaults.headers.common["Accept"]="application/json",i.a.interceptors.request.use((function(e){return s["a"].getters.getterLoggedUserToken&&!e.crossDomain&&(e.headers.authorization="Bearer ".concat(s["a"].getters.getterLoggedUserToken)),e.loader&&s["a"].dispatch("setLoaderShow",!0),e}),(function(e){return Promise.reject(e)})),i.a.interceptors.response.use((function(e){return e.config.loader&&s["a"].dispatch("setLoaderShow",!1),e}),(function(e){return setTimeout((function(){s["a"].dispatch("resetLoader")}),2500),e.response&&e.response.status&&e.response.status,Promise.reject(e)})),t["a"]=i.a}});
//# sourceMappingURL=app.21da1f2d.js.map